name: Cyberpunk Snake Glow Animation

on:
  schedule:
    - cron: "0 0 * * *" # generate tiap jam 00:00 UTC
  workflow_dispatch:

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Generate Snake (Cyberpunk Glow)
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: dhasap # ganti sesuai username GitHub lo
          outputs: dist/snake.svg
          color_snake: "#39FF14" # neon green menyala
          color_dots: "#FF00FF,#39FF14,#00FFFF,#FFD700" # magenta, neon green, cyan, gold
          color_bg: "#0a0a0f" # background gelap cyberpunk futuristik

      - name: Add Extra Glow & Cyberpunk Filter
        run: |
          mkdir -p dist
          cat > dist/snake_glow.svg <<'EOF'
          <!-- Cyberpunk Snake Glow SVG Final -->
          <!-- Gunakan ini buat README lo -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400" width="900" height="400">
            <defs>
              <!-- Background Gradient -->
              <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#0a0a0f"/>
                <stop offset="100%" stop-color="#1a001a"/>
              </linearGradient>

              <!-- Glow Filter -->
              <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur in="SourceGraphic" stdDeviation="4" result="blur1"/>
                <feGaussianBlur in="SourceGraphic" stdDeviation="8" result="blur2"/>
                <feMerge>
                  <feMergeNode in="blur1"/>
                  <feMergeNode in="blur2"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>

              <!-- Neon Gradient -->
              <linearGradient id="neonGradient" x1="0" y1="0" x2="1" y2="0">
                <stop offset="0%" stop-color="#FF00FF"/>
                <stop offset="25%" stop-color="#39FF14"/>
                <stop offset="50%" stop-color="#00FFFF"/>
                <stop offset="75%" stop-color="#FFD700"/>
                <stop offset="100%" stop-color="#FF00FF"/>
              </linearGradient>

              <!-- Motion Path -->
              <path id="snakePath" d="M 20 200 Q 150 50 300 200 T 600 200 T 900 200" />
            </defs>

            <!-- Background -->
            <rect width="100%" height="100%" fill="url(#bg)" />

            <!-- Snake Line -->
            <use href="#snakePath" stroke="url(#neonGradient)" stroke-width="6" fill="none" filter="url(#glow)" />

            <!-- Animated Glow Snake -->
            <use href="#snakePath" stroke="#fff" stroke-width="2" fill="none">
              <animate attributeName="stroke-dasharray" values="20,600;600,20" dur="6s" repeatCount="indefinite" />
              <animate attributeName="stroke-dashoffset" values="0;-600" dur="6s" repeatCount="indefinite" />
            </use>

            <!-- Snake Head -->
            <circle r="10" fill="#39FF14" filter="url(#glow)">
              <animateMotion dur="6s" repeatCount="indefinite" rotate="auto">
                <mpath href="#snakePath"/>
              </animateMotion>
            </circle>

            <!-- Pulsing Aura -->
            <circle r="20" fill="#39FF14" opacity="0.4" filter="url(#glow)">
              <animateMotion dur="6s" repeatCount="indefinite">
                <mpath href="#snakePath"/>
              </animateMotion>
              <animate attributeName="r" values="15;25;15" dur="2s" repeatCount="indefinite" />
              <animate attributeName="opacity" values="0.2;0.6;0.2" dur="2s" repeatCount="indefinite" />
            </circle>
          </svg>
          EOF

      - name: Push to output branch
        uses: crazy-max/ghaction-github-pages@v2.6.0
        with:
          target_branch: output
          build_dir: dist
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
